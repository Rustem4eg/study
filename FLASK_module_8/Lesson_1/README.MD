# Клиент-серверная архитектура: просто о сложном

Мы уже немного говорили про клиент-серверную архитектуру в модуле про боты, разве что теперь еще добавляем в нашу схему базу данных. 

<img src="/FLASK_module_8/Lesson_1/images/8.1.1.png" alt="Схема">

**Представь себе ресторан:**

- **Ты - клиент.** Ты приходишь в ресторан (к серверу), делаешь заказ (отправляешь запрос).
- **Повар - сервер.** Он готовит твой заказ (обрабатывает запрос) и приносит его тебе (отправляет ответ).
**Теперь перенесем эту аналогию на компьютеры:**

Клиент: Это твой компьютер, смартфон или любое другое устройство, которое отправляет запросы. Например, когда ты заходишь на веб-сайт, твой браузер (клиент) отправляет запрос на сервер этого сайта.
Сервер: Это мощный компьютер, который хранит данные и выполняет задачи. Он отвечает на запросы клиентов. Например, сервер веб-сайта хранит все страницы сайта и отсылает нужную страницу твоему браузеру.
Почему так удобно:

Разделение задач: Клиенты занимаются пользовательским интерфейсом, а серверы - хранением и обработкой данных. Это делает систему более эффективной и надежной.
Доступность: Благодаря серверам, к данным и сервисам можно получить доступ из любой точки мира, где есть интернет.
Масштабируемость: Можно легко добавлять новые серверы, чтобы справиться с увеличением нагрузки.
Примеры клиент-серверной архитектуры:

Веб-сайты: Когда ты заходишь на любой сайт, твой браузер (клиент) общается с сервером этого сайта.
Электронная почта: Твой почтовый клиент (например, Gmail) отправляет и принимает письма через почтовый сервер.
Онлайн-игры: Твой компьютер (клиент) подключается к игровому серверу, чтобы играть с другими игроками.
Базы данных: Программы, работающие с базами данных (например, 1C), отправляют запросы к серверу базы данных.
Преимущества клиент-серверной архитектуры:

Централизованное управление данными: Все данные хранятся на сервере, что упрощает их управление и защиту.
Высокая доступность: Серверы могут работать круглосуточно, обеспечивая непрерывный доступ к данным и сервисам.
Возможность совместной работы: Несколько клиентов могут одновременно работать с одними и теми же данными.
Недостатки клиент-серверной архитектуры:

Зависимость от сервера: Если сервер выходит из строя, то клиенты теряют доступ к данным и сервисам.
Высокие требования к безопасности: Серверы хранят важную информацию, поэтому их необходимо защищать от взлома.


HTTP: Простой протокол для огромного интернета

HTTP (HyperText Transfer Protocol) - это, по сути, язык, на котором общаются твой браузер (клиент) и веб-серверы. Когда ты вводишь адрес сайта в адресную строку и нажимаешь Enter, твой браузер отправляет на сервер сайта специальное сообщение на языке HTTP. Это сообщение называется запрос. Сервер, получив запрос, обрабатывает его и отправляет ответ обратно браузеру. Ответ содержит код состояния (все ли в порядке), заголовки (дополнительная информация) и, самое главное, сам контент страницы, которую ты хочешь увидеть.



Пример запроса:

GET /index.html HTTP/1.1
Host: www.example.com
GET: Это метод запроса, который говорит серверу: "дай мне, пожалуйста".
/index.html: Это путь к файлу на сервере, который мы хотим получить.
HTTP/1.1: Это версия протокола HTTP.
Host: Это заголовок, который указывает на доменное имя сервера.


Пример ответа:

HTTP/1.1 200 OK
Content-Type: text/html

<!DOCTYPE html>
<html>
<head>
<title>Пример страницы</title>
</head>
<body>
Привет, мир!
</body>
</html>
HTTP/1.1 200 OK: Это означает, что запрос был обработан успешно.
Content-Type: text/html: Это говорит браузеру, что полученные данные - это HTML-код, который нужно отобразить на странице.
<!DOCTYPE html>...: Это сам HTML-код страницы.



Пока все понятно? Смотрим дальше подробнее

Как мы уже выяснили, HTTP-запросы и ответы лежат в основе всего веб-взаимодействия. Давайте рассмотрим их структуру более подробно:



Запрос HTTP состоит из:

Строки метода: Определяет действие, которое клиент хочет выполнить (GET, POST, PUT, DELETE и др.).
URL: Указывает на ресурс, к которому обращается клиент.
Версия протокола: Обычно HTTP/1.1 или HTTP/2.
Заголовки: Дополнительная информация о запросе (тип содержимого, язык, кодировка и т.д.).
Тело (не всегда): Данные, которые отправляются на сервер (например, данные формы).
Пример:

GET /products HTTP/1.1
Host: www.example.com</a>
Accept: application/json</code>
Ответ HTTP состоит из:

Строка состояния: Содержит код состояния (200 OK, 404 Not Found и др.) и описание.
Заголовки: Информация об ответе (тип содержимого, длина, дата и т.д.).
Тело: Собственно данные, которые сервер отправляет клиенту.
Пример:

HTTP/1.1 200 OK
Content-Type: application/json
Content-Length: 115

{"products": [{"id": 1, "name": "Product A"}, ...]}
 
Методы HTTP: что они делают
 

Методы HTTP определяют тип действия, которое клиент хочет выполнить с ресурсом. Вот некоторые из наиболее распространенных:

GET: Используется для получения данных с сервера.
POST: Используется для отправки данных на сервер (например, при отправке формы).
PUT: Используется для замены существующего ресурса.
DELETE: Используется для удаления ресурса.
HEAD: Запрашивает только заголовки ответа, без тела.
OPTIONS: Запрашивает список поддерживаемых методов.
PATCH: Частичное обновление ресурса.
Коды состояния HTTP: что они означают
 

Коды состояния HTTP указывают на результат обработки запроса. Они делятся на несколько групп:

2xx (Успех): Запрос обработан успешно.
3xx (Перенаправление): Клиент должен выполнить дополнительное действие для получения ресурса.
4xx (Ошибка клиента): Ошибка в запросе клиента (например, 404 Not Found).
5xx (Ошибка сервера): Ошибка на стороне сервера (например, 500 Internal Server Error).
Заголовки HTTP: дополнительная информация
 

Заголовки HTTP содержат дополнительную информацию о запросе и ответе. Некоторые из наиболее распространенных заголовков:

Content-Type: Указывает тип содержимого.
Content-Length: Указывает длину содержимого в байтах.
Authorization: Используется для аутентификации.
Cookie: Хранит информацию о сессии пользователя.
Практические примеры
 

Загрузка страницы: Когда вы вводите адрес сайта в адресной строку браузера, отправляется HTTP-запрос GET к серверу этого сайта. Сервер возвращает HTML-код страницы в ответ.
Отправка формы: При отправке формы на сайте, данные формы отправляются на сервер методом POST. Сервер обрабатывает эти данные и может, например, сохранить их в базе данных.
Аутентификация: При входе на сайт, браузер отправляет свои учетные данные на сервер методом POST. Сервер проверяет эти данные и, если они верны, выдает куки для последующей аутентификации.
Погружаемся глубже в HTTP: дополнительные аспекты

HTTP-куки: маленькие помощники для больших сессий
 

HTTP-куки — это небольшие текстовые файлы, которые веб-серверы отправляют в браузеры пользователей, а браузеры затем возвращают серверу при каждом последующем запросе. Они используются для:

Идентификации пользователей: Позволяют отслеживать, какой пользователь зашел на сайт и какие действия он совершал.
Сохранения настроек: Например, выбор языка, темы оформления, сохранение товаров в корзине.
Сессионной аутентификации: Позволяют отслеживать текущую сессию пользователя без необходимости вводить логин и пароль каждый раз.
Как работают куки:

Создание: Когда пользователь впервые заходит на сайт, сервер отправляет браузеру куки с уникальным идентификатором.
Хранение: Браузер сохраняет куки на устройстве пользователя.
Отправка: При каждом последующем запросе браузер автоматически добавляет куки в заголовок запроса.
Чтение: Сервер получает куки и использует их для идентификации пользователя и восстановления его сессии.
Важно: Куки могут быть опасны, если их использовать неправильно. Злоумышленники могут использовать куки для кражи сессий и получения доступа к личной информации пользователя. Поэтому важно правильно настраивать параметры безопасности куки.



HTTP и HTTPS: безопасность превыше всего
 

HTTP: Протокол HTTP передает данные в открытом виде, что делает их уязвимыми для перехвата.
HTTPS: Протокол HTTPS использует шифрование для защиты данных, передаваемых между клиентом и сервером. Это особенно важно для передачи конфиденциальной информации, такой как пароли и данные кредитных карт.
Как работает HTTPS:

Сертификат: Веб-сайт, использующий HTTPS, имеет цифровой сертификат, который подтверждает его идентичность.
Шифрование: Браузер и сервер устанавливают безопасное соединение с использованием алгоритмов шифрования.
Передача данных: Все данные, передаваемые между браузером и сервером, шифруются и дешифруются только на конечных точках.
Хорошая статья по теме: https://selectel.ru/blog/http-request/